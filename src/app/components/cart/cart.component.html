<h2>Tu carrito</h2>

<div *ngFor="let item of cartItems" class="cart-item">
  <p><strong>{{ item.name }}</strong> - {{ item.price | currency:'USD' }}</p>
  <div>
    <button (click)="decreaseQty(item)">-</button>
    {{ item.quantity }}
    <button (click)="increaseQty(item)">+</button>
    <button (click)="removeItem(item.id)">🗑️ Quitar</button>
  </div>
</div>

<hr>

<p><strong>Total:</strong> {{ total | currency:'USD' }}</p>

<div>
  <input [(ngModel)]="couponCode" placeholder="Código de cupón">
  <button (click)="applyCoupon()">Aplicar cupón</button>
</div>

<div *ngIf="discountApplied">
  <p><strong>Total con descuento:</strong> {{ totalWithDiscount | currency:'USD' }}</p>
</div>
<div *ngIf="!discountApplied && couponCode">
  <p style="color: red;">Cupón inválido</p>
</div>
<button (click)="cerrarCarrito.emit()" class="btn-cerrar">✖️</button>